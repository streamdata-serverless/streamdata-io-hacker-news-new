!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("events"),require("http"),require("https"),require("url"),require("util")):"function"==typeof define&&define.amd?define("streamdataio",["events","http","https","url","util"],e):"object"==typeof exports?exports.streamdataio=e(require("events"),require("http"),require("https"),require("url"),require("util")):t.streamdataio=e(t.events,t.http,t.https,t.url,t.util)}(this,function(t,e,n,r,o){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=112)}([function(t,e,n){var r=n(3),o=n(16),i=n(9),s=n(20),u=n(53),c=function(t,e,n){var a,f,l,p,h=t&c.F,d=t&c.G,v=t&c.S,g=t&c.P,y=t&c.B,_=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,m=d?o:o[e]||(o[e]={}),S=m.prototype||(m.prototype={});d&&(n=e);for(a in n)f=!h&&_&&void 0!==_[a],l=(f?_:n)[a],p=y&&f?u(l,r):g&&"function"==typeof l?u(Function.call,l):l,_&&s(_,a,l,t&c.U),m[a]!=l&&i(m,a,p),g&&S[a]!=l&&(S[a]=l)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(0),o=n(7),i=n(2),s=/"/g,u=function(t,e,n,r){var o=String(i(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),u+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(u),r(r.P+r.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(14),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(36)("wks"),o=n(26),i=n(3).Symbol,s="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(28);!function(t){t[t.ERROR=0]="ERROR",t[t.WARN=1]="WARN",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG"}(r=e.LogLevel||(e.LogLevel={}));var i=function(){function t(){}return t.setLevel=function(t){this._level=t},t.debug=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._level>=r.DEBUG&&this._console&&this._console.log&&this._console.log(this._formatLog(t,e))},t.info=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._level>=r.INFO&&this._console&&this._console.info&&this._console.info(this._formatLog(t,e))},t.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._level>=r.WARN&&this._console&&this._console.warn&&this._console.warn(this._formatLog(t,e))},t.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._level>=r.ERROR&&this._console&&this._console.error&&this._console.error(this._formatLog(t,e))},t._formatLog=function(t,e){return t.replace?t.replace(/{(\d+)}/g,function(t,n){var r;if(e[n]&&"object"==typeof e[n]&&e[n]instanceof Error)try{r=e[n].message,e[n].stack&&console.error(e[n].stack)}catch(t){r=e[n]}else if(e[n]&&"object"==typeof e[n])try{r=e[n].toString!==Object.prototype.toString?e[n].toString():o.JsonHelper.stringify(e[n])}catch(t){r=e[n]}else r=e[n]&&"function"==typeof e[n]?"function":e[n]?e[n]:t;var i=""+r;return i.substring(0,Math.min(500,i.length))}):t},t}();i._console=console,i._level=r.INFO,e.Logger=i},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(19),o=n(33);t.exports=n(11)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(13);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(9),o=n(20),i=n(7),s=n(2),u=n(5);t.exports=function(t,e,n){var c=u(t),a=n(s,c,""[t]),f=a[0],l=a[1];i(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,f),r(RegExp.prototype,c,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=function(){function t(){}return t.checkNotNull=function(t,e){if(void 0===t||null===t)throw e?new Error(e):new Error("value cannot be null");return t},t.deprecated=function(t,e){this.checkNotNull(t,"functionName cannot be null"),this.checkNotNull(e,"message cannot be null"),r.Logger.warn("'{0}' is deprecated because '{1}'.",t,e)},t.checkExpression=function(t,e){if(!t)throw e?new Error(e):new Error("expression is not valid")},t}();e.Preconditions=o},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(13),o=n(29),i=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(10),o=n(56),i=n(68),s=Object.defineProperty;e.f=n(11)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(3),o=n(9),i=n(8),s=n(26)("src"),u=Function.toString,c=(""+u).split("toString");n(16).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,u){var a="function"==typeof n;a&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(a&&(i(n,s)||o(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||u.call(this)})},function(t,e,n){var r=n(36)("keys"),o=n(26);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(14),o=n(2);t.exports=function(t){return function(e,n){var i,s,u=String(o(e)),c=r(n),a=u.length;return c<0||c>=a?t?"":void 0:(i=u.charCodeAt(c),i<55296||i>56319||c+1===a||(s=u.charCodeAt(c+1))<56320||s>57343?t?u.charAt(c):i:t?u.slice(c,c+2):s-56320+(i-55296<<10)+65536)}}},function(t,e,n){var r=n(18),o=n(2);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){var r=n(0),o=n(2),i=n(7),s=n(66),u="["+s+"]",c="​",a=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),l=function(t,e,n){var o={},u=i(function(){return!!s[t]()||c[t]()!=c}),a=o[t]=u?e(p):s[t];n&&(o[n]=a),r(r.P+r.F*u,"String",o)},p=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(a,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},function(t,e,n){var r=n(57),o=n(2);t.exports=function(t){return r(o(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){function r(t,e){function n(){v!==r.CLOSED&&(v=r.CONNECTING,h("error",new o("error")),x&&(t=x,x=null),setTimeout(function(){v===r.CONNECTING&&l()},g.reconnectInterval))}function c(){v!==r.CLOSED&&(v===r.OPEN?(y.abort(),v=r.CONNECTING,h("error",new o("error"))):v===r.CONNECTING&&(h("error",new o("error")),x&&(t=x,x=null),setTimeout(function(){l()},g.reconnectInterval)))}function l(){var i=u(t),s="https:"===i.protocol;if(i.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},_&&(i.headers["Last-Event-ID"]=_),e&&e.headers)for(var S in e.headers){var b=e.headers[S];b&&(i.headers[S]=b)}if(i.rejectUnauthorized=!(e&&!e.rejectUnauthorized),e&&e.proxy){var E=u(e.proxy);s="https:"===E.protocol,i.protocol=s?"https:":"http:",i.path=t,i.headers.Host=i.host,i.hostname=E.hostname,i.host=E.host,i.port=E.port}if(e&&e.https)for(var O in e.https)if(-1!==p.indexOf(O)){var P=e.https[O];void 0!==P&&(i[O]=P)}e&&void 0!==e.withCredentials&&(i.withCredentials=e.withCredentials),y=(s?a:f).request(i,function(e){if(500===e.statusCode||502===e.statusCode||503===e.statusCode||504===e.statusCode)return h("error",new o("error",{status:e.statusCode})),void n();if(301===e.statusCode||307===e.statusCode)return e.headers.location?(307===e.statusCode&&(x=t),t=e.headers.location,void process.nextTick(l)):void h("error",new o("error",{status:e.statusCode}));if(200!==e.statusCode)return h("error",new o("error",{status:e.statusCode})),g.close();v=r.OPEN,e.on("close",function(){e.removeAllListeners("close"),e.removeAllListeners("end"),n()}),e.on("end",function(){e.removeAllListeners("close"),e.removeAllListeners("end"),n()}),h("open",new o("open"));var i="";e.on("data",function(t){i+=t;for(var e=0,n=i.length;e<n;){m&&("\n"===i[e]&&++e,m=!1);for(var r,o=-1,s=-1,u=e;o<0&&u<n;++u)r=i[u],":"===r?s<0&&(s=u-e):"\r"===r?(m=!0,o=u-e):"\n"===r&&(o=u-e);if(o<0)break;d(i,e,s,o),e+=o+1}e===n?i="":e>0&&(i=i.slice(e))})}),y.on("error",c),y.setNoDelay&&y.setNoDelay(!0),y.end()}function h(){g.listeners(arguments[0]).length>0&&g.emit.apply(g,arguments)}function d(e,n,r,o){if(0===o){if(S.length>0){var u=b||"message";h(u,new i(u,{data:S.slice(0,-1),lastEventId:_,origin:s(t)})),S=""}b=void 0}else if(r>0){var c=r<0,a=0,f=e.slice(n,n+(c?o:r));a=c?o:" "!==e[n+r+1]?r+1:r+2,n+=a;var l=o-a,p=e.slice(n,n+l);if("data"===f)S+=p+"\n";else if("event"===f)b=p;else if("id"===f)_=p;else if("retry"===f){var d=parseInt(p,10);Number.isNaN(d)||(g.reconnectInterval=d)}}}var v=r.CONNECTING;Object.defineProperty(this,"readyState",{get:function(){return v}}),Object.defineProperty(this,"url",{get:function(){return t}});var g=this;g.reconnectInterval=1e3;var y,_="";e&&e.headers&&e.headers["Last-Event-ID"]&&(_=e.headers["Last-Event-ID"],delete e.headers["Last-Event-ID"]);var m=!1,S="",b="",x=null;l(),this._close=function(){v!==r.CLOSED&&(v=r.CLOSED,y.abort&&y.abort(),y.xhr&&y.xhr.abort&&y.xhr.abort())}}function o(t,e){if(Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0}),e)for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}function i(t,e){Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0});for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}var s=n(103),u=n(110).parse,c=n(107),a=n(109),f=n(108),l=n(111),p=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername"];t.exports=r,l.inherits(r,c.EventEmitter),r.prototype.constructor=r,["open","error","message"].forEach(function(t){Object.defineProperty(r.prototype,"on"+t,{get:function(){var e=this.listeners(t)[0];return e?e._listener?e._listener:e:void 0},set:function(e){this.removeAllListeners(t),this.addEventListener(t,e)}})}),Object.defineProperty(r,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(r,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(r,"CLOSED",{enumerable:!0,value:2}),r.prototype.CONNECTING=0,r.prototype.OPEN=1,r.prototype.CLOSED=2,r.prototype.close=function(){this._close()},r.prototype.addEventListener=function(t,e){"function"==typeof e&&(e._listener=e,this.on(t,e))},r.prototype.removeEventListener=function(t,e){"function"==typeof e&&(e._listener=void 0,this.removeListener(t,e))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.validate=function(e){try{return t.parse(e),!0}catch(t){return!1}},t.parse=function(t){try{return JSON.parse(t)}catch(e){return t}},t.stringify=function(t){return t?JSON.stringify(t):"undefined"},t}();e.JsonHelper=r},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(13),o=n(3).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var r=n(61),o=n(33),i=n(35),s={};n(9)(s,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){var r=n(19).f,o=n(8),i=n(5)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(3),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(4),o=n(38),i=n(2);t.exports=function(t,e,n,s){var u=String(i(t)),c=u.length,a=void 0===n?" ":String(n),f=r(e);if(f<=c||""==a)return u;var l=f-c,p=o.call(a,Math.ceil(l/a.length));return p.length>l&&(p=p.slice(0,l)),s?p+u:u+p}},function(t,e,n){"use strict";var r=n(14),o=n(2);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){var r=n(14),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var a,f,l,p,h=u.test(t),d=typeof e,v=this,g=0;for("object"!==d&&"string"!==d&&(n=e,e=null),n&&"function"!=typeof n&&(n=s.parse),e=i(e);g<c.length;g++)f=c[g],a=f[0],p=f[1],a!==a?v[p]=t:"string"==typeof a?~(l=t.indexOf(a))&&("number"==typeof f[2]?(v[p]=t.slice(0,l),t=t.slice(l+f[2])):(v[p]=t.slice(l),t=t.slice(0,l))):(l=a.exec(t))&&(v[p]=l[1],t=t.slice(0,t.length-l[0].length)),v[p]=v[p]||(f[3]||"port"===p&&h?e[p]||"":""),f[4]&&(v[p]=v[p].toLowerCase());n&&(v.query=n(v.query)),o(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.href=v.toString()}var o=n(105),i=n(106),s=n(104),u=/^\/(?!\/)/,c=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(t,e,n){var r=this;return"query"===t?("string"==typeof e&&e.length&&(e=(n||s.parse)(e)),r[t]=e):"port"===t?(r[t]=e,o(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=e,r.port&&(e+=":"+r.port),r.host=e):"host"===t?(r[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),r.hostname=e[0],r.port=e[1])):r[t]=e,r.href=r.toString(),r},r.prototype.toString=function(t){t&&"function"==typeof t||(t=s.stringify);var e,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r},r.qs=s,r.location=i,t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),o=n(6),i=n(49),s=function(){function t(){}return t.createEventSource=function(t,e,n,s){return r.Preconditions.checkNotNull(t,"url cannot be null"),0!==t.lastIndexOf("http://",0)&&0!==t.lastIndexOf("https://",0)&&(t="http://"+t,o.Logger.warn("url has no default protocol defined. Add http:// as a default protocol.")),new i.StreamData(t,e,n,s)},t}();e.StreamDataIo=s,e.createEventSource=s.createEventSource},function(t,e,n){n(84),n(89),n(96),n(87),n(79),n(80),n(85),n(90),n(92),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(81),n(82),n(83),n(86),n(88),n(91),n(93),n(94),n(95),n(97),n(100),n(99),n(101),n(102),n(98),n(69),n(70),t.exports=n(16).String},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47);e.DefaultStreamDataServer=new r.StreamDataServer("https","streamdata.motwin.net")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,o){this.type=t,this.message=e,this.status=n,this.original=o,this.source=r||"server"}return t.createDefault=function(e){return new t(t.DEFAULT_TYPE,t.DEFAULT_MESSAGE,t.DEFAULT_STATUS,t.DEFAULT_SOURCE,e)},Object.defineProperty(t.prototype,"isServer",{get:function(){return"server"===this.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isClient",{get:function(){return"client"===this.source},enumerable:!0,configurable:!0}),t}();r.DEFAULT_TYPE="UnknownError",r.DEFAULT_MESSAGE="An error occured. Please check your console logs for more details.",r.DEFAULT_STATUS=1e3,r.DEFAULT_SOURCE="server",e.StreamDataError=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),o=n(6),i=function(){function t(){this._listeners=[]}return t.prototype.fire=function(t){this._listeners.slice().forEach(function(e){var n=e.callback,r=e.context;if(n)try{r?n.apply(r,[t]):n(t)}catch(t){o.Logger.error("Unable to forward event: {0}",t)}})},t.prototype.add=function(t,e){var n={callback:t,context:e};r.Preconditions.checkNotNull(n,"listener cannot be null"),r.Preconditions.checkExpression(-1===this._listeners.indexOf(n),"listener already exists"),this._listeners.push(n)},t.prototype.remove=function(t,e){var n={callback:t,context:e};r.Preconditions.checkNotNull(n,"listener cannot be null");var o=this._listeners.indexOf(n);r.Preconditions.checkExpression(o>=0,"listener not exists"),this._listeners.splice(o,1)},t}();e.Listeners=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(6),i=n(28),r=n(27),s=function(){function t(t){this._sse=new r(t)}return t.prototype.close=function(){!this._sse||this._sse.readyState!==r.OPEN&&this._sse.readyState!==r.CONNECTING||(o.Logger.info("Closing the SSE Stream."),this._sse.close())},t.prototype.addOpenListener=function(t,e){this._sse.addEventListener(u.OPEN,function(){e?t.apply(e,[{}]):t({})})},t.prototype.addErrorListener=function(t,e){this._sse.addEventListener(u.ERROR,function(n){var r=n?i.JsonHelper.parse(n.data):null;e?t.apply(e,[{error:r}]):t({error:r})})},t.prototype.addDataListener=function(t,e){this._sse.addEventListener(u.DATA,function(n){var r=n?i.JsonHelper.parse(n.data):null;e?t.apply(e,[{data:r}]):t({data:r})})},t.prototype.addPatchListener=function(t,e){this._sse.addEventListener(u.PATCH,function(n){var r=n?i.JsonHelper.parse(n.data):null;e?t.apply(e,[{patch:r}]):t({patch:r})})},t.prototype.addMonitorListener=function(t,e){this._sse.addEventListener(u.MONITOR,function(n){var r=n?i.JsonHelper.parse(n.data):null;e?t.apply(e,[{data:r}]):t({data:r})})},t.prototype.isConnected=function(){return this._sse.readyState===r.OPEN},t}();e.StreamDataEventSource=s;var u=function(){function t(){}return t}();u.OPEN="open",u.ERROR="error",u.DATA="data",u.PATCH="patch",u.MONITOR="monitor",e.EventType=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50),o=function(){function t(t,e,n){this.protocol=t,this.hostname=e,this.port=n}return t.prototype.toString=function(){return r.UrlHelper.urlToString(this.protocol,this.hostname,this.port)},t.prototype.getFullUrl=function(t){return this.toString()+"/"+t.toString()},t}();e.StreamDataServer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n,r){this.clientUrl=e;var o=r?r.map(function(e){return t.X_SD_HEADER+"="+encodeURIComponent(e)}):[];o.push(t.X_SD_TOKEN+"="+encodeURIComponent(n)),o.length>0&&(this.clientUrl+=-1===this.clientUrl.indexOf("?")?"?":"&",this.clientUrl+=o.join("&"))}return t.prototype.toString=function(){return this.clientUrl},t}();r.X_SD_HEADER="X-Sd-Header",r.X_SD_TOKEN="X-Sd-Token",e.StreamDataUrl=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46),o=n(45),i=n(15),s=n(6),u=n(43),c=n(44),a=n(48),f=function(){function t(t,e,n,r){i.Preconditions.checkNotNull(t,"url cannot be null."),i.Preconditions.checkNotNull(e,"appToken cannot be null."),this._url=t,this._token=e,this._headers=n||[],this._authStrategy=r,this._openListeners=new o.Listeners,this._dataListeners=new o.Listeners,this._patchListeners=new o.Listeners,this._errorListeners=new o.Listeners,this._monitorListeners=new o.Listeners,this._sse=null,this.server=u.DefaultStreamDataServer}return t.prototype.open=function(){i.Preconditions.checkNotNull(this._url,"url cannot be null"),this._sse&&this.close();var e=this._decorate(this._url,this._headers);return e&&(this._sse=new r.StreamDataEventSource(e),this._sse.addOpenListener(function(t){s.Logger.debug("SSE Stream Opened to "+this._url+"event: "+t),this._openListeners.fire()},this),this._sse.addErrorListener(function(e){e.error?this._errorListeners.fire(t._buildErrorMessage(e.error)):s.Logger.info("SSE server connection lost, retrying ...")},this),this._sse.addDataListener(function(t){s.Logger.debug("Received data:"+t.data),this._dataListeners.fire(t.data)},this),this._sse.addPatchListener(function(t){s.Logger.debug("Received patch:"+t.patch),this._patchListeners.fire(t.patch)},this),this._sse.addMonitorListener(function(t){s.Logger.debug("Received monitor:"+t.data),this._monitorListeners.fire(t.data)},this)),this},t.prototype.close=function(){return this._sse.close(),this},t.prototype.onOpen=function(t,e){return i.Preconditions.checkNotNull(t,"listener cannot be null"),this._openListeners.add(t,e),this},t.prototype.onError=function(t,e){return i.Preconditions.checkNotNull(t,"listener cannot be null"),this._errorListeners.add(t,e),this},t.prototype.onData=function(t,e){return i.Preconditions.checkNotNull(t,"listener cannot be null"),this._dataListeners.add(t,e),this},t.prototype.onPatch=function(t,e){return i.Preconditions.checkNotNull(t,"listener cannot be null"),this._patchListeners.add(t,e),this},t.prototype.onMonitor=function(t,e){return i.Preconditions.checkNotNull(t,"listener cannot be null"),this._monitorListeners.add(t,e),this},t.prototype.isConnected=function(){return this._sse.isConnected()},t.prototype._decorate=function(t,e){i.Preconditions.checkNotNull(t,"url cannot be null");var n=this._authStrategy?this._authStrategy.signUrl(t):t,r=new a.StreamDataUrl(n,this._token,e),o=this.server.getFullUrl(r);return s.Logger.debug("converted url :"+o),o},t._buildErrorMessage=function(t){return s.Logger.error(t),t.cause||t.message||t.status?new c.StreamDataError(t.cause,t.message,t.status,"server",t):c.StreamDataError.createDefault(t)},t}();e.StreamData=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.urlToString=function(t,e,n){var r=t;return t.endsWith("://")||(r+="://"),r+=e,this._isEmptyPort(n)||(r+=":",r+=n),r},t._isEmptyPort=function(t){return this._isNumber(t)?!t||0===t:!this._isString(t)||(!t||0===t.length)},t._isNumber=function(t){return"number"==typeof t},t._isString=function(t){return"string"==typeof t},t}();e.UrlHelper=r},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(25),o=n(4),i=n(39);t.exports=function(t){return function(e,n,s){var u,c=r(e),a=o(c.length),f=i(s,a);if(t&&n!=n){for(;a>f;)if((u=c[f++])!=u)return!0}else for(;a>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(51);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var r=n(10);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){t.exports=n(3).document&&document.documentElement},function(t,e,n){t.exports=!n(11)&&!n(7)(function(){return 7!=Object.defineProperty(n(30)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(60),o=n(0),i=n(20),s=n(9),u=n(8),c=n(59),a=n(32),f=n(35),l=n(63),p=n(5)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,g,y,_){a(n,e,v);var m,S,b,x=function(t){if(!h&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",O="values"==g,P=!1,w=t.prototype,L=w[p]||w["@@iterator"]||g&&w[g],N=L||x(g),C=g?O?x("entries"):N:void 0,j="Array"==e?w.entries||L:L;if(j&&(b=l(j.call(new t)))!==Object.prototype&&(f(b,E,!0),r||u(b,p)||s(b,p,d)),O&&L&&"values"!==L.name&&(P=!0,N=function(){return L.call(this)}),r&&!_||!h&&!P&&w[p]||s(w,p,N),c[e]=N,c[E]=d,g)if(m={values:O?N:x("values"),keys:y?N:x("keys"),entries:C},_)for(S in m)S in w||i(w,S,m[S]);else o(o.P+o.F*(h||P),e,m);return m}},function(t,e){t.exports={}},function(t,e){t.exports=!1},function(t,e,n){var r=n(10),o=n(62),i=n(31),s=n(21)("IE_PROTO"),u=function(){},c=function(){var t,e=n(30)("iframe"),r=i.length;for(e.style.display="none",n(55).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[s]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(19),o=n(10),i=n(65);t.exports=n(11)?Object.defineProperties:function(t,e){o(t);for(var n,s=i(e),u=s.length,c=0;u>c;)r.f(t,n=s[c++],e[n]);return t}},function(t,e,n){var r=n(8),o=n(67),i=n(21)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(8),o=n(25),i=n(52)(!1),s=n(21)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),c=0,a=[];for(n in u)n!=s&&r(u,n)&&a.push(n);for(;e.length>c;)r(u,n=e[c++])&&(~i(a,n)||a.push(n));return a}},function(t,e,n){var r=n(64),o=n(31);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(2);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(13);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var r=n(0),o=n(34)(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});r(r.P+r.F,"String",{escapeHTML:function(){return o(this)}})},function(t,e,n){"use strict";var r=n(0),o=n(34)(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});r(r.P+r.F,"String",{unescapeHTML:function(){return o(this)}})},function(t,e,n){n(12)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(12)("replace",2,function(t,e,n){return[function(r,o){"use strict";var i=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,i,o):n.call(String(i),r,o)},n]})},function(t,e,n){n(12)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(12)("split",2,function(t,e,r){"use strict";var o=n(18),i=r,s=[].push,u="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[u]||2!="ab".split(/(?:ab)*/)[u]||4!=".".split(/(.?)(.?)/)[u]||".".split(/()()/)[u]>1||"".split(/.?/)[u]){var c=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!o(t))return i.call(n,t,e);var r,a,f,l,p,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,d+"g");for(c||(r=new RegExp("^"+y.source+"$(?!\\s)",d));(a=y.exec(n))&&!((f=a.index+a[0][u])>v&&(h.push(n.slice(v,a.index)),!c&&a[u]>1&&a[0].replace(r,function(){for(p=1;p<arguments[u]-2;p++)void 0===arguments[p]&&(a[p]=void 0)}),a[u]>1&&a.index<n[u]&&s.apply(h,a.slice(1)),l=a[0][u],v=f,h[u]>=g));)y.lastIndex===a.index&&y.lastIndex++;return v===n[u]?!l&&y.test("")||h.push(""):h.push(n.slice(v)),h[u]>g?h.slice(0,g):h}}else"0".split(void 0,0)[u]&&(r=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(n,o){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,o):r.call(String(i),n,o)},r]})},function(t,e,n){"use strict";n(1)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(1)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(1)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(1)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(22)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(0),o=n(4),i=n(23),s="".endsWith;r(r.P+r.F*n(17)("endsWith"),"String",{endsWith:function(t){var e=i(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(e.length),u=void 0===n?r:Math.min(o(n),r),c=String(t);return s?s.call(e,c,u):e.slice(u-c.length,u)===c}})},function(t,e,n){"use strict";n(1)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(1)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(1)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){var r=n(0),o=n(39),i=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var r=n(0),o=n(23);r(r.P+r.F*n(17)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n(1)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";var r=n(22)(!0);n(58)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(1)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){var r=n(0),o=n(25),i=n(4);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments.length,s=[],u=0;n>u;)s.push(String(e[u++])),u<r&&s.push(String(arguments[u]));return s.join("")}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(38)})},function(t,e,n){"use strict";n(1)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(4),i=n(23),s="".startsWith;r(r.P+r.F*n(17)("startsWith"),"String",{startsWith:function(t){var e=i(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(1)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(1)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(1)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(24)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(0),o=n(22)(!0);r(r.P,"String",{at:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(4),s=n(18),u=n(54),c=RegExp.prototype,a=function(t,e){this._r=t,this._s=e};n(32)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(o(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in c?String(t.flags):u.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=i(t.lastIndex),new a(r,e)}})},function(t,e,n){"use strict";var r=n(0),o=n(37);r(r.P,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var r=n(0),o=n(37);r(r.P,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";n(24)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(24)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";function r(t){return"string"==typeof t&&(t=o(t)),t.protocol&&t.hostname?(t.protocol+"//"+t.host).toLowerCase():"null"}var o=n(40);r.same=function(t,e){return r(t)===r(e)},t.exports=r},function(t,e,n){"use strict";function r(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);r[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return r}function o(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var r in t)i.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""}var i=Object.prototype.hasOwnProperty;e.stringify=o,e.parse=r},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";var r,o={hash:1,query:1};t.exports=function(t){t=t||global.location||{},r=r||n(40);var e,i={},s=typeof t;if("blob:"===t.protocol)i=new r(unescape(t.pathname),{});else if("string"===s){i=new r(t,{});for(e in o)delete i[e]}else if("object"===s)for(e in t)e in o||(i[e]=t[e]);return i}},function(t,e){t.exports=require("events")},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("https")},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("util")},function(t,e,n){n(42),n(27),t.exports=n(41)}])});
//# sourceMappingURL=streamdataio-node.min.js.map